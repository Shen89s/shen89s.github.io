# 缺陷年龄分析

## 概念&定义

缺陷年龄是指缺陷产生或引入的时间。为了便于对缺陷年龄进行分析，我们将缺陷年龄按照软件开发流程进行划分，如图，因此缺陷年龄分析又称缺陷引入阶段分析。
<table>
	<tr>
		<th>缺陷年龄(引入阶段)</th>
		<th>描述</th>
	</tr>
	<tr>
		<td>继承或历史遗留</td>
		<td>属于历史版本，继承或是移植代码中的缺陷，非新开发的问题。</td>
	</tr>
	<tr>
		<td>需求阶段引入</td>
		<td>缺陷时在产品的需求分析阶段引入，主要包括：<br>1、需求不清楚问题；<br>2、需求错误问题；</td>
	</tr>
	<tr>
		<td>设计阶段引入</td>
		<td>缺陷是在产品设计阶段引入的问题，主要包括：<br>1、系统整体设计有问题；<br>2、功能和功能之间的接口设计有问题；<br>3、功能交互设计有问题；<br>4、边界值设计方面有问题；<br>5、流程、逻辑实现设计相关的问题；<br>6、算法设计方面有问题；</td>
	</tr>
	<tr>
		<td>编码阶段引入</td>
		<td>缺陷是在产品编码阶段引入的问题，主要包括：<br>1、流程、编码实现相关的问题；<br>2、算法实现相关的问题；<br>3、编码规范相关问题；<br>4、模块和模块之间接口实现相关的问题；</td>
	</tr>
	<tr>
		<td>新需求或需求变更引入</td>
		<td>缺陷是因为新需求、需求变更、需求冲突引入的问题。</td>
	</tr>
	<tr>
		<td>缺陷修改引入</td>
		<td>缺陷是因为修改缺陷引入的问题。如修改缺陷又引入了新缺陷等</td>
	</tr>
</table>

## 作用&意义

进行缺陷年龄分析，能够帮助我们确认缺陷引入的具体阶段，从而确认和消除 引入的缺陷和引入缺陷的环节存在的问题。

## 分析方法&步骤

### 第一 确定缺陷的年龄

分析明确缺陷引入阶段，标记缺陷年龄。   
通常公司都会有缺陷管理工具，可以在缺陷基本信息里增加缺陷年龄的选项信息，在提缺陷或者修复缺陷等编辑缺陷时完成缺陷年龄的收集和记录。如果暂时没有工具，我们可以使用如下的形式来确定和记录缺陷的年龄。

<table>
	<tr>
		<th>缺陷列表</th>
		<th>缺陷年龄</th>
		<th>缺陷列表</th>
		<th>缺陷年龄</th>
	</tr>
	<tr>
		<td>缺陷1</td>
		<td>历史遗留</td>
		<td>缺陷7</td>
		<td>缺陷修改引入</td>
	</tr>
	<tr>
		<td>缺陷2</td>
		<td>需求阶段引入</td>
		<td>缺陷8</td>
		<td>新需求或需求变更引入</td>
	</tr>
	<tr>
		<td>缺陷3</td>
		<td>设计阶段引入</td>
		<td>缺陷9</td>
		<td>编码阶段引入</td>
	</tr>
	<tr>
		<td>缺陷4</td>
		<td>编码阶段引入</td>
		<td>缺陷10</td>
		<td>历史遗留</td>
	</tr>
	<tr>
		<td>缺陷5</td>
		<td>新需求或需求变更引入</td>
		<td>缺陷11</td>
		<td>需求阶段引入</td>
	</tr>
	<tr>
		<td>缺陷6</td>
		<td>缺陷修改引入</td>
		<td>缺陷12</td>
		<td>设计阶段引入</td>
	</tr>
</table>

### 第二 绘制缺陷年龄分布图

通过记录的缺陷年龄信息，我们可以统计出各类缺陷年龄的数量。
<table>
	<tr>
		<th>缺陷年龄</th>
		<th>缺陷数量</th>
		<th>缺陷年龄</th>
		<th>缺陷数量</th>
	</tr>
	<tr>
		<td>继承或历史遗留</td>
		<td>15</td>
		<td>需求阶段</td>
		<td>20</td>
	</tr>
	<tr>
		<td>设计阶段</td>
		<td>30</td>
		<td>编码阶段</td>
		<td>40</td>
	</tr>
	<tr>
		<td>缺陷修改</td>
		<td>10</td>
		<td>新需求或变更</td>
		<td>50</td>
	</tr>
</table>

根据表中的数据最终绘制出缺陷年龄分布图。    

![](https://shen89s.github.io/resFiles/r2/缺陷年龄分布图.jpg)

### 第三 分析缺陷年龄

我们在进行缺陷年龄分析之前，需要先想一下，理想的缺陷年龄应该具备哪些特点。

#### 1理想的缺陷分布图

在缺陷的引入阶段就能发现改类缺陷，缺陷不会逃逸到下个阶段。   

![](https://shen89s.github.io/resFiles/r2/引入阶段.jpg)

例如，当分析设计阶段缺陷年龄时，分析结果是一个“大园饼”，即所有的缺陷都是在设计阶段引入的，没有需求阶段引入的缺陷。换句话说，需求阶段引入的缺陷都在需求分析阶段都已经完全去除了。如果真的能到达这样的水平，测试人员也就光荣的失业了。但实际情况是，每个阶段都会有一些缺陷“逃逸”到了下个阶段，需要“测试”来发现这些逃逸的缺陷。    

作为专业的测试人员我们知道，测试不应该是想到哪测到哪，而应该进行测试分层和分阶段进行测试，而每个测试分层或测试阶段都围绕不同的测试目标，使用不同的测试方法进行测试。因此针对测试阶段理想的缺陷分布图应该是这样的。   

在特定的测试阶段或分层，发现该阶段或分层的问题。  

![](https://shen89s.github.io/resFiles/r2/发现特定测试分层问题.jpg)

例如，在集成测试和系统测试阶段发现的缺陷，主要是在编码阶段和设计阶段引入的。在验收测试阶段发现的缺陷主要是设计阶段引入的。       
对其他几类缺陷年龄，我们的期望是：   
口  没有继承和历史遗留的缺陷。   
口  没有新需求引入或者需求变更引入的缺陷。   
口  没有缺陷修改引入的缺陷。

#### 没有在特定的测试阶段或测试分层，发现该阶段或分层的缺陷。

例如，在集成测试阶段，我们希望发现编码阶段和设计阶段引入的缺陷，但实际上却发现了大量的在需求阶段引入的缺陷。这说明:   
口  产品需求质量不高，需求存在不清晰或者错误的情况。   
口  系统架构设计质量不高。   
口  需求质量不高，产品功能质量也不会太高。   
口  系统架构设计的质量不高，产品在非功能属性方面质量也不会太高。

这就需要测试人员或者整个研发团队来有针对性的进行改进。例如：      
口  对需求再次进行检测，确保尚未集成的功能对应的需求的正确性。   
口  分析架构设计中的问题，找出对非功能属性方面的主要影响，调整测试策略，尽量提前并加大这些内容的测试力度。   
口  调整测试策略，增加相关功能的测试力度和回归测试规模。

#### 继承或历史遗留引入的缺陷过多

如果我们在测试中发现很多继承和历史遗留的缺陷，这说明产品还存在一些“旧账”尚未清理，这时需要我们：      
口  进行或重新进行老功能分析，更新测试策略。   
口  对这些缺陷进行分析，由此更新测试策略，进行探索式测试。   
口  如果被继承的版本处于维护阶段，考虑这些缺陷是否需要在维护版本中解决，并发布补丁或升级包。   
口  确认被继承的版本在维护阶段发现的其他缺陷，是否需要同步到当前最新版本中。

![](https://shen89s.github.io/resFiles/r2/清理旧账.jpg)

#### 新需求或者需求变更引入的缺陷过多

当我们在进行缺陷年龄分析的时候，发现了很多因为新需求或需求变更引入的缺陷，出现这种情况的可能原因有：   
口  新需求或需求变化的部分比较多，比较大，引入了缺陷。   
口  新需求的质量可能不高，引入了缺陷   
口  产品设计质量可能不高，导致设计需要频繁更改，从而引入缺陷。

可以采取的措施有：   
口  对这些缺陷进行分析，由此更新测试策略，增加探索和测试。   
口  增加或加强需求澄清相关活动。   
口  增加或者加强开发人员和测试人员之间针对产品设计进行的沟通活动。   
口  增加一些功能交互测试和场景测试。   
但从根本上改善上述问题，还需要研发经理、系统架构师和开发人员一起来回溯总结，做好变更控制，提高变更内容的需求和设计质量。

#### 缺陷修改引入的缺陷过多

如果发现很多因为缺陷修改引入的缺陷，这说明开发修改缺陷的质量不高，对于测试人员来说，可以采取以下措施：   
口  验证缺陷时，除了验证缺陷本身是否被正确的修复了，还需要围绕缺陷展开探索式测试。   
口  增大对基本功能进行回顾测试的比例。   
口  增加或者加强开发人员和测试人员对修改内容、影响范围等的沟通，尤其针对重点修改或者较大改动的缺陷。   
口  可以和开发人员约定一些有利于缺陷修改质量的措施，如对缺陷的代码进行review后才能合入，每修改的缺陷开发人员都需要提供自检报告单等等   
缺陷修改引入缺陷还会带来另外一个影响，就是缺陷不会收敛。我们可以通过控制提高缺陷修复质量，来促进缺陷的快速收敛。


