
# 一夫当关的软件测试架构师

虽然目前国内很多软件公司已经设置了“软件测试架构师”这个职位，但是总的来说“软件测试架构师”这个角色现在还不够普遍。“软件测试架构师”是“软件测试工程师”在软件测试技术上一个重要的发展方向。

“软件测试架构师”在产品测试活动中具体会做哪些事情、关注哪些方面？对产品测试来说，无论是传统的集成产品开发模式,还是选代、敏捷,测试活动都可以概括为测试需求分析、测试分析和设计、测试执行和测试质量评估。产品测试不应该是品研发末端的活动，而应该在产品研发的开始阶段，测试就需要投入。和“好的产品是设计出来的”一样,测试分析不仅能够帮助测试更好地认识产品，准备测试，还能反过来帮助开发确认需求，确认产品在非功能属性(如性能、可靠性、易用性等)方面的设计。测试的意义，不仅在于测试发现bug，为产品发布提供信心，还在于缺陷预防，切实提升产品质量。作为测试团队的技术领头人，软件测试架构师在整个“端到端”的测试过程中,需要重点关注哪些事情呢?

## 测试架构师在需求分析中

和开发一样，测试的源头是需求。软件测试架构师在需求阶段,需要重点完成的工作是：   
口  理解需求。
口  制定一份总体测试策略,来明确测试范围、测试目标、测试重点和难点、测试深度和广度。   
此时测试架构师不应该陷入产品的实现细节中去,这时正确的方向和清晰的目标比细节更重要。如何才算“理解需求”呢？   
口  参与每一场需求的讨论，     
口  熟读每一条需求规格，   
这样就够了吗？需要特别提醒的是，此时花一些时间来理解产品的商业目标,梳理用户的使用场景,往往会为后面的工作带来事半功倍的效果。

### 1.理解产品的商业目标

产品的商业目标是测试架构师需要理解的首要问题。

理解产品的商业目标的重要性在于，从产品层面来说，只要产品不能满足商业需求，即便产品使用的是最先进的开发技术，即便产品没有一个缺陷，也是无用的，不能称其为成功的产品。

Dave Hendrichson在他的著作12 Essental Skill for sofnware Archirects (《软件架构师的12项修炼》张菲译，机械工业出版社出版)中提出“系统架构师在考虑构想软件架构的真正价值时，不能只是关注系统构造的技术方面，更要对客户价值和商务价值一你能帮助客户真正解决怎样的问题?你怎样帮助公司赚钱?一有深刻的认识”。这点对于软件测试架构师来说同样适用。

在这本书中，Dave Hendrichson 用了一个气泡形象地概括了商务知识和软件架构的交错关系，如图3-1所示 Dave Hendrichson 的气泡图：   
![](https://shen89s.github.io/resFiles/r2/DaveHendrichson气泡图.jpg)
和系统架构师一样，软件测试架构师同样需要理解下述问题：   
口  公司中的营销和销售人员如何细分客户？   
口  每个细分市场的关键价值主张是什么？   
口  公司试图增长哪些细分市场?如何增长？   
口  每个市场是谁做出购买决策的？  
口  每个细分市场的主要竞争对手是谁？   
口  公司对此产品的策略主张是什么?所在的产品是如何融入这一战略的？  


并能够围绕下述内容展开测试活动:   
口  如何验证待测试的产品正确体现了市场价值？   
口  所做的测试策略是否和公司的财务、销售、营销目标一致？   

当软件测试架构师对这些内容进行深入思考，并通过沟通交流和决策者、系统架构师、市场等角色达成一致，统一目标时，测试很自然地就能融入其中，成为公司的伙伴，而不是阻碍软件按时发布的“拦路虎”。测试也能更容易获得决策者和产品开发的认可，测试的深度、广度会更透明，利于测试更好地把握测试进度，而不是总被压缩测试时间来换取项目进度的零偏差(很多时候都存在压缩测试时间来保证项目进度的问题，其中很大一部分的原因是决策者根本不认可测试的内容和方法，认为测试过度或者冗余过多，并没有准确评估测试真正的工作量)。

### 2.梳理用户的使用场景

梳理用户的使用场景是软件测试架构师在这阶段需要重点关注的另外一项内容。

所谓“用户的使用场景”，简单来说，就是指用户将会如何使用这个产品。用户场景将直接体现产品的价值。因此，在测试之前，了解你的用户至关重要:   
口  产品有多少种类型的用户，这些用户的业务又是什么，他们如何从你的产品中获得价值(比如通过你的产品赚钱，获得某种资源)？   
口  产品的竞争对手对用户提供了哪些有价值的解决方案？你们之间的差异是什么？   
口  产品所在领域有哪些基本的规范和要求，行业背景有哪些，用户的习惯是什么(如完成各种活动的顺序、对活动完成的判断标准和可能的重要决定等)？   

然后软件测试架构师需要把梳理的用户使用场景，归纳为测试场景:    
口  针对不同类型的用户，分别确定这些用户的行为习惯和关注点。   
口  逐一分析这些用户会如何使用产品，根据分析结果建立产品的拓扑模型、配置模型和流量模型等，抽象出典型场景。   
口  确定各个典型场景下的输入和输出(包括正常输入和异常输入、攻击，还需要考虑模拟测试的时间长短，等等)   

对测试场景的分析，也可以放在测试分析和设计阶段进行。这部分的输出将会成为验收测试时的重要输入。


### 3.输出产品总体测试策略

输出产品总体测试策略是软件测试架构师在这一阶段的重要输出。

它的作用，就好像测试的总纲，帮助整个测试团队明确测试的范围、目标，测试的重点和难点，测试的深度和广度，以及如何安排各种测试活动(及测试分层)。

测试重点和测试难点是完全不同的两个概念。   
测试重点是由产品价值、质量目标、产品实现(新写代码、开源代码或是继承代码)和历史测试情况(主要针对继承类产品)等多项因素综合决定的。“测试难点”是从测试技术的角度来说的，是对产品测试验证难易程度的分析。

测试深度和测试广度也有所不同。   
测试广度是从覆盖的角度来对产品测试进行描述而测试深度是从测试方法(如单运行测试、多运行测试、边界值或错误输入等)来对测试进行描述。

当我们对每个特性确定了测试重点和测试难点、测试深度和测试广度之后，测试的总体思路也就随之明确了。后面的自动化策略、探索测试策略、测试分析和设计的策略也变得明确了。

测试分层帮我们将一个大的测试目标分解为若干小的测试目标。   
这样我们可以逐层测试，逐层评估测试结果，并根据测试结果不断修正测试策略，不仅让测试目标变得可以达到，还让整个测试过程变得可控。   

上述内容构成了测试的整体框架。我们可以在这个框架下不断细化，再输出阶段测试策略和版本测试策略等。如果把测试需求分析、测试分析设计、测试执行、测试质量评估等测试活动比作珍珠，测试策略就是那根穿珍珠的线，贯穿始终。


## 测试架构师在测试分析和设计中

软件测试架构师作为测试团队的技术带头人，肯定是测试分析设计的好手，但软件测试架构师不应该陷到具体的测试分析和设计中去，对他们来说，更重要的工作是制定阶段测试策略，落实测试设计策略，对测试团队进行测试分析和设计方面的辅导，从整体上来把握测试设计的质量。

### 1.制定阶段测试策略

阶段测试策略是指按照测试分层来确定每个测试层次的测试策略，阶段测试策略也是总体测试策略的进一步分解。测试分层是一个十分重要的测试概念，它是指将一些具有相同测试目标的测试活动放在一起作为一个测试的层次。“V模型”下的单元测试、集成测试、系统测试和验收测试就是测试分层的一个例子，如图所示，V模型下的测试分层举例：   
![](https://shen89s.github.io/resFiles/r2/V模型下的测试分层举例.jpg)
总结来说,阶段测试需要关注的内容包括:   
口  每个阶段的测试对象、目标   
口  每个阶段的出入口准则   
口  如何选择测试用例   

出入口准则其实是确定这一阶段的质量目标和验收标准。有时候，测试阶段也是环环相扣的，例如我们要想进行性能测试，就需要将功能稳定作为前提，这时功能稳定就是性能测试的一个入口条件。出人口准则井不是限制测试的，其实是测试和开发的约定，这就需要开发能够认可这份准则，沟通、协商必不可少。

当然，除了和开发之间的沟通，测试团队之间的沟通也变得非常重要一我们需要通过沟通，让测试能够充分理解测试策略，理解每个测试阶段的测试目标，以及要如何才能达到这个目标，使得整个测试团队能够“力出一孔”。

### 2.落实测试设计策略,保证测试设计的质量

测试设计策略是指软件测试架构师能够按照总体测试策略中确定的测试深度和广度、重点和难点，来组织整个测试团队进行测试设计，使得测试用例的输出能够和测试策略保持一致。方法上，软件测试架构师可以使用《测试分析设计表》来保证测试设计符合测试策略。

一般来说，我们会安排有经验的测试工程师来进行测试设计，但现实往往是我们的团队刚组建，大部分测试设计的工作还是由新手来进行的。除了掌握必要的测试设计方法外，掌握一些用例编写的技巧，让测试用例更易读、易于执行、易于维护也很重要。如何写出漂亮的测试用例。当然，对软件测试架构师来说，必要的沟通辅导也是不可少的。

## 测试架构师在测试执行中

对软件测试架构师来说，测试执行也一定不会难倒他，找bug的能力必然也是出类拔萃的，但是软件测试架构师却不应该把找bug作为测试执行阶段的重要目标，更不应该陷到测试执行中，而应该把精力投入到制定版本测试策略、跟踪测试执行和版本质量评估中。    

软件测试架构师在测试执行中的主要工作：   
![](https://shen89s.github.io/resFiles/软件测试架构师在测试执行中的主要工作.jpg)
### 1.制定版本测试策略

版本测试策略和阶段测试策略、总体测试策略是一脉相承的，软件测试架构师需要在每个版本测试开始之前，制定出这个版本的测试策略，主要内容包括：   
口  测试范围和计划相比的偏差。   
口  本版本的测试目标。   
口  需要重点关注的内容。   
口  测试用例的选择。   
口  测试执行顺序。   
口  试探性的测试策略。   
口  接收测试策略。   
口  回归测试策略。   
口  探索测试策略。   
口  自动化测试策略。   

### 2.跟踪测试执行

跟踪测试执行是软件测试架构师在测试执行中最主要的工作，具体内容包括:   
口  跟踪测试用例执行的情况。   
口  每日缺陷跟踪。   
口  调整测试策略。   

跟踪测试执行，其实也是一种质量保证工作。通过每日的缺陷跟踪，我们可以实时评估当前版本的质量，为测试策略的调整提供依据。

### 3.版本质量评估和建立版本质量档案

版本质量评估是对每个测试版本的质量总结。方法上，我们可以使用软件产品质量评估模型来进行质量评估。

对软件测试架构师而言，可能无法凭一己之力完成所有特性的质量评估。这我们可以整理一个“特性版本的质量档案”(见表3-1).由整个测试团队来记录和维护。

表3-1特性版本的质量档案

![](https://shen89s.github.io/resFiles/特性版本的质量档案.jpg)


## 测试架构师在测试质量评估中

和版本质量评估不同，此时的质量评估是指阶段质量评估或者发布时的质量评估，需要给出要给出“能否进入下一阶段的测试”或者“发布”的结论。

方法上，阶段质量评估依然使用软件产品质量评估模型来进行评估，需要重点关注的内容包括:

口  确认总体测试策略中重要的质量目标是否达到。   
口  对总体测试策略中未达标的一般性的质量目标，确定应对措施。   
口  进行遗留缺陷分析。   

在进行阶段测试质量评估时，软件测试架构师还需要特别注意此时的缺陷修复策略和对非必然重现bug的处理。


## 像软件测试架构师一样的思考

有些公司可能并没有软件测试架构师这样的职位，很多读者可能也是第一次听说这样的称谓。   
其实，是否叫“软件测试架构师”这个称谓并不重要，重要的是在测试团队中，能有人像软件测试架构师那样，通盘考虑测试策略，考虑如何才能测试成功。

在测试团队中，无论你是谁，都请像软件测试架构师一样作如下思考。   
1. 测试的目标是什么？
2. 测试的范围是什么？
3. 测试的深度和广度是什么？
4. 测试的重点和难点是什么？
5. 如何安排测试？
6. 如何评估测试结果？

这些问题，可能就是一个思考过程，没有输出，但是只要你愿意去思考这些问题，就一定能为产品测试带来积极的效果，同时自己的测试水平，特别是对测试整体的控制力会大大加强。也许对一个测试团队来说，最好的情况就是人人都是软件测试架构师吧。


## 软件测试经理可以替代软件测试架构师吗

软件测试经理(有些公司又称为测试代表、测试项目经理等)是我们非常熟悉的角色，软件测试经理能够替代软件测试架构师吗？

软件测试经理的重点工作是制订测试计划，并在测试团队中执行测试计划，为决策者对产品能否发布提供建议和证据。因此软件测试经理需要熟练掌握的是项目管理方面的知识，包括各种沟通、协调等，以项目运作的方式保证产品测试的顺利进行。而软件测试架构师的工作重点是通过制定产品的测试策略，为产品找到最适合产品的测试方法，

因此软件测试架构师需要熟练掌握与产品相关的知识和各种测试技术，并有能力找到其中的平衡点。将软件测试经理和软件测试架构师的工作重点放在一起进行比较，很容易发现他们分别关注的是“测试计划”和“测试策略”这两项不同的测试活动。

这两项活动有什么相关联的地方吗？如何理解这两项活动之间的差异呢？   
测试策略解决的是产品“测试目标(why)，以及“测什么”(what)和“怎么测”(how)的问题；   
而测试计划是在明确了“目标”测什么”和“怎么测”后，确定由“谁”(who)在“何时”(when)花费多长时间来进行相关的测试。   

软件测试架构师如何保证制定的测试策略在测试团队中落地？其实他是无法直接保证的，需要软件测试经理把“产品测试策略”转化为“产品测试计划”，通过项目运作的方式将产品测试策略真正在项目中付诸实践。两者的内在关系，还从产品测试的角度回答了为什么软件测试架构师要关注产品的商业目标、理解产品价值、理解项目管理，因为测试策略其实就是直接为测试计划服务的。

那软件测试经理为什么不能制定产品测试策略呢？   
软件测试经理当然可以制定产品测试策略，而且由测试经理直接根据测试策略来制订测试计划，还可以省掉和测试架构师的沟通成本。

那么产品测试策略由软件测试架构师来做是否多此一举呢？答案当然是否定的。形象地说，产品测试策略就是在为产品测试找一条到达测试目标的“路”。达到同一测试目标的道路一定不止一条，软件测试架构师就是通过系统的分析，找到最合适的那条路，这个过程需要耗费大量的时间和精力。但遗憾的是，什么才是“最合适的路”是很难直接度量和评价的:不可能对同一个项目运行两套方案来判定方案的优劣，而时光又不能倒流，

正因为如此，虽然这项活动很“重要”，但是却容易被忽略，特别是当测试经理陷入各种沟通协调会议，需要处理各种复杂关系的时候，往往没有更多的精力去系统地分析、确定测试策略。所以并不是说软件测试经理不能或者没有能力去制定测试策略，而是软件测试经理也是人，不是超人，在心有余而力不足的情况下做出来的测试策略，质量上很难保证，难免有失偏颇，再落实成测试计划在测试项目中执行，对整个产品测试团队，乃至产品研发团队来说，都是一件可怕的事情。

所以软件测试经理需要一个“贤内助”一 软件测试架构师来系统地进行分析，以保证产品测试策略的质量。可见软件测试经理和软件测试架构师都是软件测试中的重要角色，他们之间的关系是合作，而不是替代(也没法替代)。

## 软件测试经理可以替代软件测试架构师吗

系统架构师也是我们非常熟悉的角色之一。在介绍软件测试在技术上的发展方向时就是通过将软件测试架构师和系统架构师进行对比的方法来表述的。可见软件测试架构师和系统架构师有一定的对等性，但是软件测试架构师服务的对象是产品测试而系统架构师服务的对象是产品开发。产品测试和产品开发本来就不是独立的两个活动，其中最简单的关系就是，产品开发出来的产品，会作为产品测试的输入，

产品测试的输出结果(如发现的产品缺陷，产品质量评估).又会反过来影响产品开发(修复缺陷，甚至是新需求的提出)。   
所以软件测试架构师和系统架构师也有很多交集的地方:   
1. 对产品价值的理解。
2. 对产品场景的理解。
3. 对产品系统框架的理解。
4. ... ... ... ... ...

但是拥有很多交集并不代表系统架构师可以取代软件测试架构师。就像产品开发人员不能取代产品测试人员一样。GlenfordJMyers在他的著作《软件测试艺术》中，曾经从心理学的角度对上述问题的本质进行了分析。这是因为，产品开发的工作是“生成性”的是从无到有去创建一个产品；而产品测试找bug的过程却是“破坏性”的。很少有人可以做到客观地去创造一个东西，然后再客观地去毁坏一个东西。系统架构师和软件测试架构师也有以下类似的状态。

系统架构师理解产品的价值，是为了正确地创造并实现产品；软件测试架构师理解产品的价值，是为了验证产品是否真的实现了应有的价值，是否存在错误。

系统架构师理解产品场景，是为了分析出产品的特性和功能，为产品实现做准备；软件测试架构师理解产品场景，是为了验证产品是否满足用户在该场景中的使用需要，在该场景下产品是否存在质量缺陷。

系统架构师理解产品的系统框架，是为了产品最终能够顺利实现；软件测试架构师理解产品的系统框架，是为了测试设计和测试执行能够更有效，验证产品实现是否和架构的设计是一致的，是否存在问题。

可见，不同的关注视角使得软件测试架构师和系统架构师即使是在同一件事物的同个领域，也会出现巨大的不同。所以系统架构师并不能替代软件测试架构师，而是应该在以下方面相互协作。

系统架构师可以和软件测试架构师一起对产品价值进行讨论，相互理解。系统架构师需要和软件测试架构师一起整理用户使用场景，软件测试架构师对用户的潜在需求的理解，对友商同类产品的使用经验和曾经与用户沟通接触的经历都可以帮助系统架构师更好地确定用户使用场景，确定产品需求。


系统架构师还需要和软件测试架构师就产品的系统设计进行交流，   
其实只有软件测试架构师对产品的实现理解得越深和越透，才能越准确地把握测试的重点，减少无效的测试而系统设计正是对产品实现理解的第一步。   
软件测试架构师也可以根据产品的失效规律为系统架构师在产品架构设计上提供参考，进行缺陷预防。   
所以，系统架构师和软件测试架构师应该成为产品研发中最亲密无间的挚友。
