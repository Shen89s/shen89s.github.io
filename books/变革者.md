# 如何在组织中引入变革（单元测试）
# 逐步成为变革者(的倡导者)
在任何类型的组织中,要改变人们的习惯,其实更多的是做出心理上改变,而非技术上的。人们不喜欢改变,改变通常都伴随着大量的FUD(Fear,Uncertainty,Doubt,害怕、不确定和怀疑),对于大多数人,做出改变并不像在公园散步那样轻松。
如果你想要在组织中成为变革的倡导者,首先应该接受这个角色，然后时刻寻找契机和储备知识。

- 成就变革的心
变更总需要有人担起责任，确保变革不会因为缺乏动力而失败,这个人就是你。只有主动出击，才能把变革往你想要的方向引导。
事实上不管你愿不愿意,变革一旦发起，人们都会认为你（提出人）应该对发生的事情负责,你即便躲起来也于事无补。实际上,躲起来反而会使事情变得糟糕。

- 储备变更条件
当你开始实施变革,人们会开始提出各种他们关心的棘手问题。
这个要浪费多少时间?这个对于我作为QA工程师意味着什么?我们怎么知道这个有效?
你要做好回答问题的准备。你会发现,当需要做出困难的决定和回答这些问题时,在实施变革之前说服组织内的人对你会有极大的帮助。


## 准备好面对质疑

你首先需要做足功课。,研究相关的资料,浏览论坛、邮件组和博客,咨询你的同伴。如果你能回答自己提出的难题,应该也能回答其他人的质疑。

## 说服组织内成员

孤独是可怕的,没有什么比在一个组织内独自对抗众人更让人觉得孤独。
如果只有你自己认为你做的事情是个好主意,那么就不太可能有别人会努力实现你所倡导的事情。
想想谁能帮助你,谁能阻碍你的努力,即:支持者和反对者。

- 支持者
开始倡导变革时,要找出最有可能会帮助你做这件事的人（他们就是你的支持者）。
这些人通常是喜欢尝试新技术的人,或者思想开明,这些人通常愿意尝试 你倡导的事情。
这些人通常了解行业大背景，可能已经差不多接受了你倡导的变革,只需要一个契机开始做出改变,甚至可能自己做过尝试却失败了。
你应该首先联系他们,征求他们对你要做的事情的意见。他们可能会告诉你一些你没有考虑到的事情:哪些团队适合进行试点,或者哪些部门更能接受这种变革。
他们甚至可能根据个人经验,告诉你需要注意什么事情。通过和他们交流,你可以确保他们成为这个过程的参与者。

?> 如果人们觉得自己是一个过程的参与者,他们通常会帮助实现这个过程。你可以使他们成为你的支持者,请他们帮助你回答人们的问题,并帮助他们做好所需的准备。

- 反对者
接下来,你要找出反对者。这些是组织中最有可能会抵制你的变革的人。
人们抵制特定变革的原因各不相同,分析人们抵制变更的原因，有人是担心会失去工作,有人是习惯了现有的做事方式,因而反对任何变革。
从失败中总结出的经验是:如果你去找这些人,大谈哪些事情他们应该可以做得更好,是不会有效果的。们不喜欢别人告诉他们什么事情做得不好。相反,你可以请这些人在过程中提供帮助,例如负责定义单元测试的编码标准,或者隔天与同伴做代码和测试审查。或者,你可以请他们加入团队,负责挑选课程资料或者外部的顾问。如果你给予他们新的责任,他们会觉得自己受到依赖,在组织内的工作很有意义。你需要使他们成为变革的参与者,否则他们几乎一定会阻碍变革的进行。
例如:一个经理可能会反对增加单元测试,声称这会过多地延长开发时间,增加需要维护的代码。你可以给他们(至少给那些愿意并且有能力的人)在过程中分配一个积极的角色,使他们也成为过程的参与者而不是抵制者。

?> 说服测试经理同意变更，并且抛出橄榄枝，长期可以解决团队效率和质量问题，成为部门的标杆，对团队管理也是一种业绩。按照现有的方式肯定是例外放行，不如放手一搏，还有一线生机。团队中的新人在工作的同时学到知识，也可以缓解团队的抱怨情绪日益高涨。做单元测试分享和跟领导汇报的时候请团队的人员现身说法，他们会觉得自己受到了依赖，而相对于对自己的汇报也更加增加了事实依据。

## 找到可能的切入点

你需要找到在组织中何处可以开始实施变革。
大多数的成功实施都采取一个稳定的路线:从个小团队的试点项目开始,看看效果如何,如果一切顺利,就推广到其他团队和其他项目。
这里有一些提示，可以帮助你实现这个过程，如果你所处的环境不支持你进行的变革,这些提示会对你有很大的帮助。

- 选择较小的团队
找到可以进行试点的团队通常很容易。你大致会希望找一个小团队,开发低调的低风险项目。如果项目风险很小,就比较容易说服人们尝试你建议的变革。
需要注意的是,这个团队需要有成员愿意改变工作方式,学习新技术。具有讽刺意味的是,团队里经验较少的成员通常更愿意接受变革,而经验更丰富的成员往往会墨守成规。如果你能找到一个团队,团队的领导者经验丰富井愿意接受变革,而且团队中还有经验较少的成员,那么这个团队会比较容易接纳你的意见。你可以征求这个团队的意见,问他们是否愿意进行一个试点项目。他们会告诉你,你是否找到了开始变更的正确起点。

?> YLA团队非常适合，不一样的是当时遇到的情况是要放手一搏，另外再推动的过程中确实一些新人很快就学会了单元测试，而高级和架构师们很难搞。

- 创建子团队
进行试点项目的另一个可能是:在一个现有团队内组建一个子团队。几乎每个团队都有一个“黑洞”组件需要维护,这个组件虽然有不少功能,但是也有很多缺陷。给这种组件增加功能是项艰巨的任务,这种痛苦可能会促使人们尝试一个试点项日。

?> dzjz重构感觉是一个非常好的机会，系统的进行单元测试培训和demo编写，规范以及分层等策略。

- 考虑项目的可行性
在选择试点项目时,你要避免将目标定得过大。难度较大的项目需要团队有更丰富的经验，
因此你可能希望至少有两个选项，一个复杂项目和一个较简单的项目，可以从中选择。在做好了对当前任务的心理准备后,让我们看看有什么可以使事情进行得更顺利。

?> 开始的时候每个团队的人员至少在自己负责的一个需求里进行单元测试。

- 使用代码和测试审查作为培训的工具
如果你是一个小型团队(不超过8人)的技术组长,进行代码审查(包含测试审查)是培训组员的最佳方式之一。在你审查其他人的代码和测试时,你可以告诉他们你希望的测试是什么样的,你对编写测试或者进行测试驱动开发有哪些体会。

1. 面对面进行审查，不要使用远程软件，在面对面的交流中,大量的信息是通过语言之外的方式传递的,人们可以学习得更快,效果更好。

?> 团队每个人员在初次编写单元测试的时候，我都跟他们一起写，测试思路等等都跟他们灌输一下。小孩子的都有模仿能力，手把手指导即使你是错的，也可以教出一批错误来。

2. 在最初几个星期,审查项目签入的每一行了代码。这样可以避免发生“我们以为这个代码不需要审查”的问题。如果没有规定哪些代码需要审查(所有的代码都需要审查),就不会有遗漏的代码。

3. 在代码评审中加入第三个人,这个人可以坐在一边,学习如何审查代码。以后他们可以自己审查代码,培训别的组员,这样你就不再是唯一能做代码审查的人,从而避免自己成为团队的瓶颈。这样做的目的是培养其他组员代码审查的能力,让他们承担更多的责任。

?> 在检查单元测试的时候，让其他测试人员也跟着，这样以后单元测试的检查，就可以所有的测试人员都可以做。可惜这个没到达预期的效果。


## 变更实施方式

一个组织或者团队要开始改变一个过程,主要方式有两种:自下面上,或者自上而下(有时两种方式都可以)你会看到,这两种方式大不相同,你的团队或公司可能适合其中一种。
随着变革的进行,你需要学会让管理人员相信,你的成就也是他们的成就,或者说服他们从组织外引人帮助。很重要的一点是:要让大家都看到这个过程,同时也要设定可以度量的清晰目标。你还需要发现和避开障碍。在变革进行时,要做的事情可能会很多,但你需要选择其中最关键的。

?> 正确的方式不止一种,分析最关键的因素至关重要。

- 游击式实现(自下而上)
游击式的实现方式,是指从一个团队开始实施变革,得到成果,然后才说服其他人这种实践是值得的。游击式实现的推动者通常是一个厌倦了墨守陈规的团队。他们决定采取不同的工作方式,自学技术,实现变革。如果这个团队展现出了成果,组织里的其他人也许会决定在自己的团队里也采取类似的变革。

有的时候,开发者首先采纳这种变革,然后管理者也采纳。另外的时候,开发者首先倡导这种变革,然后管理者也倡导。两种情况的区别在于:第一种情况可以在高层不知道的情况下隐蔽地进行,而第二种情况必须得到管理者的支持。你需要自己决定采用哪种方式更好。有的时候,改变只能隐蔽地进行。你应该尽量避免采用这种方式。但是,如果实在没有别的办法,而你相信变革必须进行,那就尽管去做吧。不要认为这个建议会影响你的职业发展。开发者每天都在做着一些未经许可的事情:调试代码,阅读邮件,给代码加注释,画流程图,等等。这些都是开发者日常工作的一部分。单元测试也是如此。大部分的开发者在工作中已经编写了各种测试(自动化的或手动的)。引入单元测试只是要使我们花在测试上的时间获得更长远的收益。

?> 团队先进行了试点，做出成果之后，再向领导汇报，得到领导的认可，得到领导的倡导。

- 说服高层(自上而下)
由一个经理或者开发者启动这个过程,使组织中的其他人逐渐加入;或者一个中层经理看到一个演示或者读了一本书(例如这本书)或者和一个同事讨论了工作方式中一些具体改变的好处。这个经理通常会把这个想法介绍给其他团队开始实施,或者借助自己的权利直接进行变革。


- 引入外援
邀请组织外的专家来帮助实现变革。相比任用公司内部的人,请一个外部顾问来帮助实施单元测试以及其他实践,有着很多好处。
1. 言论自由 
顾问可以说出公司内部的人不方便说的话(“代码完整性很差”“测试可读性很糟”,等等)
2. 经验 
顾问通常经验丰富,知道如何处理来自公司内部的阻力,能够回答棘手的问题,深谙推动事情发展的关键。
3. 专有时间
顾问是专职的，公司内的雇员通常还有别的事情要做(例如编写软件),而顾问是全职负责这件事情。我经常看到因为变革的倡导者超额工作,没有时间投入变革过程,而导致这个过程失败。

- 使进度可见
一件重要的事情是:始终保持变革的进度和状态可见。你可以把白板或海报挂在走廊的墙上或者人多的地方,展示那些和要达到的目标相关的信息。
例如,你可以列出上一次的每日构建过程中通过或失败的测试数;做个图表展示哪些团队已经使用了自动化的构建过程;如果变更目标中有的话,贴出选代过程的Scrum燃尽图或者测试代码覆盖率报告。贴出你自己的和所有专家的详细联系方式,这样人们的问题可以得到解答;设置一个大的LCD显示屏,用醒目的图表不断显示构建状态:哪些正在运行,哪些失败了。把这些放在一个全体开发者都能看到的地方,例如人来人往的走廊,或者团队办公区的墙上。
使用这些信息，向不同的群组不断的传递消息，以达到更好的效果。
1. 进行变更的群组
这个群组中的人会获得更大的成就感和自豪感,他们会更积极地完成这个过程,因为其他人也能看到这个过程的进度。通过这些图表,他们也能了解到与其他人相比自己的进度如何,,如果得知另个组在某个方面比自己的进度快,他们可能会工作得更加努力。

?> 自动构建自动部署dzjz tap都在进行，其实无形中就会导致大家都很目录完善。

2. 组织中未参与这个过程的群组
未参与这个过程的群组 你会激发这些人的兴趣和好奇心,让他们谈论和关注这个过程,创造出一种潮流,如果他们愿意也可以加入进来。

?>也不全然吧，有些人就是没有激情。


## 注意事项

- 变革遇到障碍
障碍总是难免的。大部分障碍会来自组织结构的内部,而有些障碍是技术性的。只要能找到正确的解决方法,技术上的障碍很容易解决。组织上的障碍则需要小心关注,采用心理学的方法解决。

如果遇到挫折,例如一次选代失败了,测试比预期的运行时间长很多等,不要有暂时的失败感,这一点很重要。有时事情进展困难,你需要坚持至少几个月才能对新流程建立起信心,解决所有的小问题。

你可以让管理层做出承诺:即使事情发展赶不上计划,也要坚持至少三个月。事先得到管理层的同意至关重要。等变革进行到第一个月中间时,你承受着巨大压力,再四处奔走试图说服别人，而这个时候如果还需要目录说服领导就已经太晚了。

?> 技术人的问题通常可以通过自己的努力学习以及请教解决。


-变更缺少驱动力
要持续地推动变革进行并不容易,你需要在日常工作之外抽出时间培训别人,帮助他们解决问题,还要发动内部的斗争,谋求变革。你必须甘愿付出这些时间,否则变革将不会发生。

-缺乏政策支持
如果你的老板明确告诉你不要进行变革,那你基本上无计可施,只能努力去说服管理层接受你的观点。但是有时老板的态度并不明朗,你需要能够察觉到管理层是否在反对你推行变革。例如,老板可能会告诉你:“好,没问题,去实施这些测试吧,你可以用10%的工作时间。”要开始单元测试,至少需要30%的工作时间。这是经理试图阻止你的一种方式― 让变革因缺乏资源而失败。

?> 这个方面其实有些人是后知后觉的，增加变更的参与者，有些人可以弥补你个人的不足。你需要认识到人们是否在反对你,这对于有些人来说很难，尤其是技术人员，但是一旦意识到了,就很容易找到反对来自何处。如果你告诉他们所给的限制是不现实的,他们会说:“那就不要做了。”


- 不好的实现和第一印象
如果你还不知道怎么编写优秀的单元测试，就计划组织进行变革，就找一个有经验的人一起参与，或者遵循最佳实践。如果在开始阶段就效果不佳，人们会对你失去信心，这可能会导致试点项目夭折。

?> 代码可测性设计等方面比较欠缺，所以尽可能的去读相关的书籍。

- 缺少团队支持
如果没有得到团队的支持，变革几乎不可能成功，努力让团队的每个成员都参与到新过程中，至少减少不利的干扰。和团队进行充分的沟通，可以选择和团队每个人员逐个沟通，以得到他们的支持，也可以和整个团队进行沟通，回答他们提出的尖锐问题。

?> 无论你做什么事情，都不要把团队对你的支持当做理所当然，你要清楚自己行为的后果，毕竟 你要和这些人每天一起工作。


- 影响因素
人以及人的行为方式，比变革和单元测试更有趣。 有时你试图让某些人开始做某件事情，而这件事情本身对他们也有莫大的好处，然而不管你如何努力，他们就是不做，令人非常沮丧。你也许已经试过和他们讲道理，但是他们听过 就算了，之后并没有采取任何行动。

有一本影响力的书 The Power to Chang Anything(McGraw-Hill,2007),这本书有句非常耐人寻味的话：你看到的每一个行为，都有其必然发生的理由。也就是说除了愿意和能力，还有其他因素影响着人们的行为。这里简单列了几个因素：如果只改变其中一个因素，人们的行为不会发生改变。
1. 个人能力：这个人掌握了执行这项工作的知识和技术吗
2. 个人动机：这个人喜欢做这项工作吗当遇到困难时能坚持吗？
3. 社会能力：你是否给这个人提供了所需的帮助、信息，尤其是无时无刻。
4. 社会动机：这个人的周围的人和环境是否鼓励正确的行为，反对错误的行为，正能量还是负能量。
5. 组织（环境）能力：是否存在环境因素，预算等，使行为方便、容易、安全等，
6. 组织动机：如果你做了正确（错误）的事情，是否得到了清晰的有意义回报（惩罚），短期回报和你想要达到的预期是否行为一致。
我写了一本关于如何管理技术团队的书NotestoaSofhaneTeamLeader,介绍了更多关于影响因素的内容。

?> 计划看一下这2本书，确实套路还不够深。